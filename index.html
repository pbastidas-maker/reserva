<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Reserva de Servicios</title>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
  <style>
    body {
      margin: 0;
      font-family: 'Roboto', sans-serif;
      background-color: #f5f5f5;
      color: #333;
      padding: 1rem;
    }
    .container {
      width: 100%;
      max-width: 500px;
      margin: 0 auto;
      padding: 2rem;
      background: #fff;
      box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
      border-radius: 12px;
      margin-top: 2rem;
    }
    h1 {
      color: #3483fa;
      font-size: 1.6rem;
      margin-bottom: 1rem;
      display: flex;
      align-items: center;
      gap: 0.5rem;
      flex-wrap: wrap;
    }
    h1::before {
      content: "üóìÔ∏è";
      font-size: 1.6rem;
    }
    label {
      font-weight: 700;
      margin-bottom: 0.5rem;
      display: block;
    }
    input[type=range], input[type=date], input[type=text] {
      width: 100%;
      margin: 1rem 0;
      padding: 0.6rem;
      font-size: 1rem;
      box-sizing: border-box;
    }
    .valor-seleccionado {
      font-size: 1.3rem;
      color: #3483fa;
      font-weight: bold;
      text-align: right;
    }
    .boton-confirmar, .boton-reset, .boton-imprimir {
      display: block;
      width: 100%;
      padding: 1rem;
      margin-top: 1rem;
      background-color: #3483fa;
      color: white;
      font-size: 1rem;
      font-weight: bold;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      transition: background-color 0.3s ease;
    }
    .boton-confirmar:hover, .boton-reset:hover, .boton-imprimir:hover {
      background-color: #2968c8;
    }
    .mensaje-confirmacion {
      margin-top: 1.5rem;
      padding: 1rem;
      background-color: #e6f0ff;
      border-left: 4px solid #3483fa;
      color: #333;
      font-size: 1rem;
      border-radius: 8px;
    }
    .footer {
      text-align: center;
      margin-top: 2rem;
      font-size: 0.85rem;
      color: #aaa;
    }
    @media screen and (max-width: 600px) {
      h1 {
        font-size: 1.4rem;
      }
      .container {
        padding: 1.5rem;
      }
      .valor-seleccionado {
        font-size: 1.2rem;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Reserva tu Servicio de Manoseo</h1>
    <form id="reservaForm" action="https://formspree.io/f/mrbllkkv" method="POST" onsubmit="return enviarFormulario(event)">
      <label for="nombre">Nombre completo</label>
      <input type="text" name="nombre" id="nombre" required>

      <label for="fecha">Selecciona la fecha de tu reserva</label>
      <input type="date" name="fecha" id="fecha" required>

      <label for="cantidad">¬øCu√°ntas unidades de tiempo deseas reservar?</label>
      <input type="range" id="cantidad" name="cantidad" min="1" max="50" value="1">
      <div class="valor-seleccionado" id="valorSeleccionado">1</div>

      <button type="submit" class="boton-confirmar" id="botonConfirmar">Confirmar Reserva</button>
      <div class="mensaje-confirmacion" id="mensajeConfirmacion"></div>
      <button type="button" class="boton-imprimir" onclick="window.print()">Imprimir Confirmaci√≥n</button>
      <button type="button" class="boton-reset" onclick="resetReserva()">Hacer otra reserva</button>
    </form>
  </div>

  <div class="footer">Reserva sin fines comerciales solo recreacionales</div>

  <script>
    window.addEventListener('DOMContentLoaded', function () {
      var rangeInput = document.getElementById('cantidad');
      var valorTexto = document.getElementById('valorSeleccionado');
      var fechaInput = document.getElementById('fecha');

      rangeInput.addEventListener('input', function () {
        valorTexto.textContent = rangeInput.value;
      });

      var hoy = new Date().toISOString().split("T")[0];
      fechaInput.setAttribute("min", hoy);
    });

    function enviarFormulario(event) {
      event.preventDefault();

      const form = document.getElementById('reservaForm');
      const formData = new FormData(form);
      const boton = document.getElementById('botonConfirmar');

      boton.disabled = true;
      boton.textContent = 'Enviando...';

      fetch(form.action, {
        method: 'POST',
        body: formData,
        headers: {
          'Accept': 'application/json'
        }
      }).then(response => {
        const mensaje = document.getElementById('mensajeConfirmacion');
        boton.disabled = false;
        boton.textContent = 'Confirmar Reserva';

        if (response.ok) {
          mensaje.textContent = `‚úÖ ${formData.get('nombre')}, tu reserva para el d√≠a ${formData.get('fecha')} por ${formData.get('cantidad')} unidades de tiempo ha sido enviada correctamente. Revisa tu correo.`;
          mensaje.style.backgroundColor = '#e6f0ff';
          mensaje.style.borderLeft = '4px solid #3483fa';
          form.reset();
          document.getElementById('valorSeleccionado').textContent = '1';
        } else {
          mensaje.textContent = '‚ùå Hubo un error al enviar tu reserva. Intenta nuevamente.';
          mensaje.style.backgroundColor = '#f8d7da';
          mensaje.style.borderLeft = '4px solid #dc3545';
        }
      });
    }

    function resetReserva() {
      const form = document.getElementById('reservaForm');
      form.reset();
      document.getElementById('valorSeleccionado').textContent = '1';
      document.getElementById('mensajeConfirmacion').textContent = '';
      document.getElementById('mensajeConfirmacion').style.backgroundColor = '';
      document.getElementById('mensajeConfirmacion').style.borderLeft = '';
    }
  </script>
</body>
</html>
